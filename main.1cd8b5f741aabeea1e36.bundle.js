(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1397:function(module,exports,__webpack_require__){"use strict";__webpack_require__(88).addons.setConfig({refs:{}})},1400:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var dist=__webpack_require__(144),react=(__webpack_require__(121),__webpack_require__(0)),react_default=__webpack_require__.n(react),theming_dist=__webpack_require__(5),main=__webpack_require__(633),main_default=__webpack_require__.n(main),makeStyles=(__webpack_require__(23),__webpack_require__(4),__webpack_require__(12),__webpack_require__(1434)),TextField=__webpack_require__(1436);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var useStyles=Object(makeStyles.a)((function(theme){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:theme.spacing(1),marginRight:theme.spacing(1)},dense:{marginTop:theme.spacing(2)},menu:{width:200}}}));function Input(_ref){var value=_ref.value,onChange=_ref.onChange,label=_ref.label,_React$useState2=_slicedToArray(react_default.a.useState(value),2),val=_React$useState2[0],setValue=_React$useState2[1],classes=useStyles();return react_default.a.createElement("form",{className:classes.container,noValidate:!0,autoComplete:"off"},react_default.a.createElement(TextField.a,{id:"outlined-name",label:label,className:classes.textField,value:val,onChange:function onChange(ev){return setValue(ev.target.value)},onKeyPress:function onKeyPress(ev){ev.stopPropagation();var key=ev.key,v=ev.target.value;"Enter"===key&&(ev.preventDefault(),onChange(v))},margin:"normal",variant:"outlined"}))}var _templateObject,_templateObject2,PanelUI_SearchInputs=function SearchInputs(_ref){var search=_ref.search,onChange=_ref.onChange,searchVars=Object.keys(search),updateVar=function updateVar(key){return function(value){onChange(Object.assign({},search,function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}({},key,value)))}};return searchVars.map((function(v){return react_default.a.createElement(Input,{value:search[v],onChange:updateVar(v),label:v,key:v})}))};function _taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var LayoutBlock=Object(theming_dist.styled)(dist.Layout)(_templateObject||(_templateObject=_taggedTemplateLiteral(["\n  margin: 0px;\n  height: 100px;\n"]))),AddonBlock=Object(theming_dist.styled)(dist.Block)(_templateObject2||(_templateObject2=_taggedTemplateLiteral(["\n  border: 1px solid gray;\n  margin: 2px;\n  padding: 8px;\n  overflow: auto;\n"]))),PanelUI=function Panel(_ref){var startRequest=_ref.startRequest,request=_ref.request,kind=_ref.kind,story=_ref.story,isFirstDataReceived=_ref.isFirstDataReceived,searchVars=_ref.searchVars,search=_ref.search,rowResult=_ref.rowResult,onEdit=_ref.onEdit;return react_default.a.useEffect((function(){isFirstDataReceived&&(startRequest(),request())}),[kind,story,request,startRequest,isFirstDataReceived,searchVars]),isFirstDataReceived?react_default.a.createElement(LayoutBlock,null,react_default.a.createElement(AddonBlock,{size:"30%"},react_default.a.createElement(PanelUI_SearchInputs,{search:searchVars,onChange:search})),react_default.a.createElement(AddonBlock,null,react_default.a.createElement(main_default.a,{src:rowResult,name:"data",collapsed:4,collapseStringsAfterLength:60,onEdit:onEdit}))):null},getQuery=(__webpack_require__(20),__webpack_require__(6),__webpack_require__(78),__webpack_require__(86),function getQuery(store){return store.query}),getVars=function getVars(store){return Object.assign({},store.vars,store.searchVars)},getCredentials=function getCredentials(store){var endpoint=store.endpoint,token=store.token;return endpoint?{endpoint:endpoint,token:token}:null};function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var GraphQLClient=__webpack_require__(852).GraphQLClient,createClient=function createClient(_ref){var endpoint=_ref.endpoint,token=_ref.token;return new GraphQLClient(endpoint,{headers:token?{authorization:"Bearer ".concat(token)}:{}})},client_request=function(){var _ref3=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(_ref2){var endpoint,token,query,vars,client,data;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return endpoint=_ref2.endpoint,token=_ref2.token,query=_ref2.query,vars=_ref2.vars,client=createClient({endpoint:endpoint,token:token}),_context.next=4,client.request(query,vars);case 4:return data=_context.sent,_context.abrupt("return",data);case 6:case"end":return _context.stop()}}),_callee)})));return function request(_x){return _ref3.apply(this,arguments)}}();function actions_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var actions_startRequest=function startRequest(store){return Object.assign({},store,{result:null,loading:!0,queryError:null})},contentRequest=function(){var _ref=function actions_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){actions_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){actions_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(store){var query,credentials,vars,data;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return query=getQuery(store),credentials=getCredentials(store),vars=getVars(store),_context.prev=3,_context.next=6,client_request(Object.assign({},credentials,{query:query,vars:vars}));case 6:if(data=_context.sent){_context.next=9;break}throw new Error("No data from query\n\n".concat(query,"\n\nwith vars:\n\n").concat(JSON.stringify(vars)));case 9:return _context.abrupt("return",Object.assign({},store,{rowResult:data,queryError:null,loading:!1}));case 12:return _context.prev=12,_context.t0=_context.catch(3),_context.abrupt("return",Object.assign({},store,{result:void 0,queryError:_context.t0.message,loading:!1}));case 15:case"end":return _context.stop()}}),_callee,null,[[3,12]])})));return function contentRequest(_x){return _ref.apply(this,arguments)}}(),updateSearch=function updateSearch(store,searchVars){return Object.assign({},store,{searchVars:searchVars})},editResult=function editResult(store,_ref2){var updated_src=_ref2.updated_src;return Object.assign({},store,{originalResult:store.rowResult,rowResult:updated_src})};Object(dist.setConfig)({addId:"graph-cms",panelTitle:"GraphQL"});var selectors={searchVars:function getSearchVars(_ref2){return _ref2.searchVars},rowResult:function getResult(store){return store.rowResult},isConnected:function isConnected(store){return store.isConnected}};Object(dist.register)(selectors,(function actions(_ref){var local=_ref.local;return{request:local(contentRequest),search:local(updateSearch),startRequest:local(actions_startRequest),onEdit:local(editResult)}}))(PanelUI);__webpack_require__(854),__webpack_require__(1188)},645:function(module,exports,__webpack_require__){__webpack_require__(646),__webpack_require__(1400),__webpack_require__(1191),module.exports=__webpack_require__(1397)},665:function(module,exports){},719:function(module,exports){}},[[645,1,2]]]);